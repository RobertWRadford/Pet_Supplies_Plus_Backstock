<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        {% load static %}
          <link rel="stylesheet" href="{% static 'stock.css' %}">
        {% load static %}
        <title>PSP Back Stock</title>
    </head>
    <body>
        <div class='filtering'>
            <h1>Filter Options:</h1>
            <form method='post'>
                {% csrf_token %}
                <div class='selectionBlock'>
                    <label>Brand:</label>
                    {{filterForm.brand}}
                </div>
                <div class='selectionBlock'>
                    <label>Category:</label>
                    {{filterForm.category}}
                </div>
                <input id='submitBtn' type="submit" name="filter" value='Submit'/>
            </form>
        </div>
        {% for item in items %}
            <div class='product'>
                <div class='details'>
                    <section class='text'>
                        <h1 class='brand'>{{item.brand}}</h1>
                        <h3 class='description'>{{item.product}}</h3>
                        <h3 class='upc'>{{item.upc}}</h3>
                    </section>
                </div>
                <section class='forms'>
                    {% if request.user.is_staff or request.user.is_superuser %}
                        <form method="post">
                            {% csrf_token %}
                            <input type='hidden' name='edit' value='True'>
                            <input type='hidden' name='item' value='{{item.pk}}'>
                            <input class="newQuantity" type="number" name="quantity" min="0" step="1" value="{{item.quantity}}"/>
                        </form>
                    {% else %}
                        <h3>{{item.quantity}}</h3>
                    {% endif %}
                    {% if request.user.is_superuser %}
                        <form method="post" class='delete'>
                            {% csrf_token %}
                            <input type='hidden' name='remove' value='True'>
                            <input type='hidden' name='item' value='{{item.pk}}'>
                            <input type="submit" name="remove" value="Del"/>
                        </form>
                    {% endif %}
                </section>
            </div>
            {% if not forloop.last and not request.user.is_superuser %}
                <div class='filler'></div>
            {% endif %}
        {% endfor %}
        {% if request.user.is_superuser %}
            <form method='post' class='create'>
                {% csrf_token %}
                <input type="hidden" name="new">
                <div class='details'>
                    <section class='text'>
                        <input type="text" name="brand" maxlength='25' placeholder="brand..">
                        <input type="text" name="product" maxlength='75' placeholder="description..">
                        <input type="text" name="upc" maxlength='12' placeholder="UPC..">
                    </section>
                </div>    
                <section class='forms'>
                    <input type="number" name="quantity" placeholder="1..." min="0" step="1">
                </section>
            </form>
        {% endif %}
    </body>
</html>